<!DOCTYPE html>
<html>
  <head>
    <title>Lisper</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&family=Titan+One&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="styles/main.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@700&display=swap"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
  </head>

  <body style="background-color: #121212;">
    <nav
      class="navbar navbar-expand-lg navbar-dark bg-dark"
      aria-label="Fifth navbar example"
    >
      <div class="container-fluid">
        <img src="styles/logo.jpg" style="width: 250px; height: 70px" alt="" />
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarsExample05"
          aria-controls="navbarsExample05"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarsExample05">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="http://localhost:3000/air-quality"
                >Air Quality</a
              >
            </li>
            <!-- <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">Dropdown</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
              </ul>
            </li> -->
          </ul>
          <form role="search">
            <input
              class="form-control"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
          </form>
        </div>
      </div>
    </nav>
    <div class="container intro2 mt-5">
      <h1 data-title="Welcome.To.The.Weather.Co" class="text-fill">
        Welcome.To.The.Weather.Co
      </h1>
      <!-- <form action="/" method="POST">
        <div class="container">
          <div class="container lat">
            <h3>
              Enter latitude 
            </h3>
            <input
              type="text"
              name="lat"
              id="lat"
              placeholder="Latitude"
            />
          </div>
          <div class="container long">
            <h3>
              Enter longitude 
            </h3>
            <input
              type="text"
              name="long"
              id="long"
              placeholder="Longitude"
            />
          </div>
          <div class="container ok my-3">
            <input type="submit" class="btn btn-danger" value="OK" />
          </div>
        </div>
      </form>  -->
    <!-- </div> -->
     <form action="/city2" method="POST"> 
      <div class="container">
        <div class="container city">
          <h4>Enter name of city</h4>
          <input
            type="text"
            name="city"
            id="city"
            placeholder="City"
            autocomplete="off"
          />
        </div>
        <div class="container ok my-3">
          <input type="submit" class="btn btn-danger" value="OK" />
        </div>
      </div>
    </form> 
    <h1>OR</h1>
    <form action="/locn2"method="POST">
      <div class="container">
      <input type="submit" class="btn btn-dark" value="Use Current Location">
    </div>
    </form>
      <div class="container cont1">
        <div class="container card2 mx-5 my-5">
          <div class="container car2 my-4">
            <h4><%= locals.date %></h4>
            <h4><strong><%= locals.loc %></strong></h4>
            <h4 >Air Quality Index(AQI)</h4>
            <div class="aqi">
              <div class="outer">
                <div class="inner">
                  <div id="number"><%= locals.aqi %></div>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    version="1.1"
                    width="160px"
                    height="160px"
                  >
                    <defs>
                      <linearGradient id="GradientColor">
                        <stop offset="0%" stop-color="#e91e63" />
                        <stop offset="100%" stop-color="#673ab7" />
                      </linearGradient>
                    </defs>
                    <circle cx="80" cy="80" r="70" stroke-linecap="round" id="circle"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="container card2 mx-5 my-5">
            <div class="container car2 my-4">
              <h4><strong><%= locals.loc %></strong></h4>
              <table>
                <tr>
                  <td>O₃</td>
                  <td><%= locals.o3 %> µg/m³</td>
                </tr>
                <tr>
                  <td>SO₂</td>
                  <td><%= locals.so2 %> µg/m³</td>
                </tr>
                <tr>
                  <td>NO₂</td>
                  <td><%= locals.no2 %> µg/m³</td>
                </tr>
                <tr>
                  <td>CO</td>
                  <td><%= locals.co %> µg/m³</td>
                </tr>
                <tr>
                  <td>PM10</td>
                  <td><%= locals.pm10 %> µg/m³</td>
                </tr>
                <tr>
                  <td>PM25</td>
                  <td><%= locals.pm25 %> µg/m³</td>
                </tr>
              </table>
            </div>
          </div>
      </div>
    </div>
    <script>
        let number = document.getElementById("number");
        let num = number.innerText
        let counter=0;
        setInterval(()=>{
            if(counter==num){
                clearInterval()
            }else{
                counter+=1
                number.innerHTML = counter+"ppm"
            }
        },30)
        let circ = document.getElementById("circle")
        if(num>0 && num<=50){
            circ.style.stroke="green";
        }else if(num>50 && num<=100){
            circ.style.stroke="yellow";
        }else if(num>100 && num<=150){
            circ.style.stroke="orange";
        }else if(num>150 && num<=200){
            circ.style.stroke="red";
        }else if(num>200 && num<=300){
            circ.style.stroke="purple";
        }else{
            circ.style.stroke="maroon";    
        }
    </script>
  </body>
</html>
